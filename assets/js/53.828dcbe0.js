(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{553:function(v,_,t){"use strict";t.r(_);var a=t(15),r=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"mysql数据库的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql数据库的优化"}},[v._v("#")]),v._v(" MySQL数据库的优化")]),v._v(" "),t("h2",{attrs:{id:"数据表数据类型的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据表数据类型的优化"}},[v._v("#")]),v._v(" 数据表数据类型的优化")]),v._v(" "),t("p",[v._v("需要考虑的两个问题：")]),v._v(" "),t("ol",[t("li",[v._v("字段使用什么样的数据类型更合适？")]),v._v(" "),t("li",[v._v("字段使用什么样的数据类型性能更快？")])]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("字段类型")]),v._v(" "),t("th",[v._v("考虑的问题")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("int、tinyint、bigint")]),v._v(" "),t("td",[v._v("考虑空间的问题、考虑范围的问题")])]),v._v(" "),t("tr",[t("td",[v._v("char、varchar")]),v._v(" "),t("td",[v._v("存储字符串长度是否固定")])]),v._v(" "),t("tr",[t("td",[v._v("enum")]),v._v(" "),t("td",[v._v("特定、固定的分类可以使用enum存储，效率更快")])]),v._v(" "),t("tr",[t("td",[v._v("IP地址存储")]),v._v(" "),t("td",[v._v("使用整型存储IP地址")])])])]),v._v(" "),t("h2",{attrs:{id:"索引优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引优化"}},[v._v("#")]),v._v(" 索引优化")]),v._v(" "),t("p",[v._v("索引的优化主要主要两个点：")]),v._v(" "),t("ol",[t("li",[v._v("建立合适的索引")]),v._v(" "),t("li",[v._v("索引在什么样的效率最高")])]),v._v(" "),t("h3",{attrs:{id:"索引的创建原则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引的创建原则"}},[v._v("#")]),v._v(" 索引的创建原则")]),v._v(" "),t("ol",[t("li",[v._v("索引并不是越多越好，在合适的字段上建立合适的索引，索引在提高读效率的同时，降低了写的效率")]),v._v(" "),t("li",[v._v("复合索引的前缀原则，对多个字段a,b,c建立索引 ，跳过a使用其他字段作为索引字段无法使用到索引")]),v._v(" "),t("li",[v._v("like查询%的问题，如果%在前，无法命中索引")]),v._v(" "),t("li",[v._v("全表扫描的优化，mysql在查询的时候，优先走索引，如果单表查询的数据跟全表一样，就放弃索引，直接扫表")]),v._v(" "),t("li",[v._v("or条件索引使用情况,如果or前面有索引后面没有索引的话则使用不到索引")]),v._v(" "),t("li",[v._v("字符串类型索引失效的问题,对于字符串类型的字段，在使用索引的时候，需要加''号，不然没法命中索引")])]),v._v(" "),t("h2",{attrs:{id:"sql语句的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql语句的优化"}},[v._v("#")]),v._v(" SQL语句的优化")]),v._v(" "),t("p",[v._v("需要考虑的几个方向：")]),v._v(" "),t("ol",[t("li",[v._v("优化过程中的数据访问")]),v._v(" "),t("li",[v._v("优化长难句的查询语句")]),v._v(" "),t("li",[v._v("优化特定类型的查询语句")])]),v._v(" "),t("h3",{attrs:{id:"优化过程中的数据访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化过程中的数据访问"}},[v._v("#")]),v._v(" 优化过程中的数据访问")]),v._v(" "),t("ol",[t("li",[v._v("按需获取数据，使用limit")]),v._v(" "),t("li",[v._v("返回列避免使用*,直接使用列")])]),v._v(" "),t("h3",{attrs:{id:"优化长难句的查询语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化长难句的查询语句"}},[v._v("#")]),v._v(" 优化长难句的查询语句")]),v._v(" "),t("ol",[t("li",[v._v("变复杂为简单，将复杂的SQL拆分为简单SQL")]),v._v(" "),t("li",[v._v("切分查询,对于大数据，分批处理")]),v._v(" "),t("li",[v._v("分解关联查询，拆分多个查询，有利用做数据层面的缓冲")])]),v._v(" "),t("h3",{attrs:{id:"优化特定类型的查询语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化特定类型的查询语句"}},[v._v("#")]),v._v(" 优化特定类型的查询语句")]),v._v(" "),t("ol",[t("li",[v._v("优化count()")]),v._v(" "),t("li",[v._v("优化关联查询")]),v._v(" "),t("li",[v._v("优化子查询")]),v._v(" "),t("li",[v._v("优化GroupBy和distinct")]),v._v(" "),t("li",[v._v("优化limit和union")])]),v._v(" "),t("h2",{attrs:{id:"存储引擎的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#存储引擎的优化"}},[v._v("#")]),v._v(" 存储引擎的优化")]),v._v(" "),t("p",[v._v("需要考虑的点")]),v._v(" "),t("ol",[t("li",[v._v("尽量使用InnoDB进行存储，使用独立表空间，行锁")]),v._v(" "),t("li",[v._v("分区分库")]),v._v(" "),t("li",[v._v("分库分表")])]),v._v(" "),t("h3",{attrs:{id:"分区操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分区操作"}},[v._v("#")]),v._v(" 分区操作")]),v._v(" "),t("ol",[t("li",[v._v("通过特定的策略对数据表进行物理拆分")]),v._v(" "),t("li",[v._v("对用户透明")]),v._v(" "),t("li",[v._v("parting by")])]),v._v(" "),t("h3",{attrs:{id:"分库分表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分库分表"}},[v._v("#")]),v._v(" 分库分表")]),v._v(" "),t("ol",[t("li",[v._v("水平拆分，拆分热数据和冷数据")]),v._v(" "),t("li",[v._v("垂直拆分，拆分常用的列和不常用的列")])]),v._v(" "),t("h2",{attrs:{id:"数据库服务器架构的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库服务器架构的优化"}},[v._v("#")]),v._v(" 数据库服务器架构的优化")]),v._v(" "),t("p",[v._v("需要考虑的点：")]),v._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://pan.baidu.com/disk/home#/all?vmode=list&path=%2F%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99%2F%E6%85%95%E8%AF%BE%E7%BD%91%2Fphp%2F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%AB%98%E6%80%A7%E8%83%BDyii2.0%2F9",target:"_blank",rel:"noopener noreferrer"}},[v._v("主从复制"),t("OutboundLink")],1),v._v("，使用MySQL binlog日志来实现主从复制")]),v._v(" "),t("li",[v._v("读写分离")]),v._v(" "),t("li",[v._v("双主热备")]),v._v(" "),t("li",[v._v("负载均衡，通过LVS的三种基本模式实现负载均衡或者MyCat数据库中间件实现负载均衡")])])])}),[],!1,null,null,null);_.default=r.exports}}]);